{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\sangeeth\\\\Desktop\\\\ree\\\\frontend\\\\src\\\\UploadForm.js\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst MAX_FILES = 10;\nconst MAX_SIZE_MB = 100;\nexport default function UploadForm({\n  onUpload\n}) {\n  _s();\n  const [files, setFiles] = useState([]);\n  const [captions, setCaptions] = useState([]);\n  const [times, setTimes] = useState([]);\n  const [error, setError] = useState('');\n  const [loading, setLoading] = useState(false);\n  const handleFileChange = e => {\n    const selected = Array.from(e.target.files);\n    if (selected.length > MAX_FILES) {\n      setError(`Max ${MAX_FILES} files allowed.`);\n      return;\n    }\n    for (let file of selected) {\n      if (file.type !== 'video/mp4') {\n        setError('Only MP4 files allowed.');\n        return;\n      }\n      if (file.size > MAX_SIZE_MB * 1024 * 1024) {\n        setError(`File size must be < ${MAX_SIZE_MB}MB.`);\n        return;\n      }\n    }\n    setFiles(selected);\n    setCaptions(Array(selected.length).fill(''));\n    setTimes(Array(selected.length).fill(''));\n    setError('');\n  };\n  const handleCaptionChange = (i, val) => {\n    const arr = [...captions];\n    arr[i] = val;\n    setCaptions(arr);\n  };\n  const handleTimeChange = (i, val) => {\n    const arr = [...times];\n    arr[i] = val;\n    setTimes(arr);\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    if (!files.length) return setError('Select at least one video.');\n    if (captions.some(c => !c)) return setError('All captions required.');\n    if (times.some(t => !t)) return setError('All schedule times required.');\n    setLoading(true);\n    setError('');\n    const form = new FormData();\n    files.forEach(f => form.append('videos', f));\n    captions.forEach(c => form.append('captions', c));\n    times.forEach(t => form.append('scheduledTimes', t));\n    try {\n      const res = await axios.post('/api/reels/upload', form, {\n        headers: {\n          'Content-Type': 'multipart/form-data'\n        }\n      });\n      onUpload(res.data.reels);\n      setFiles([]);\n      setCaptions([]);\n      setTimes([]);\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.error) || 'Upload failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    onSubmit: handleSubmit,\n    style: {\n      marginBottom: 32\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"video/mp4\",\n      multiple: true,\n      onChange: handleFileChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), files.map((file, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        margin: '8px 0',\n        border: '1px solid #eee',\n        padding: 8\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"b\", {\n          children: file.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 16\n        }, this), \" (\", (file.size / 1024 / 1024).toFixed(1), \" MB)\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"Caption\",\n        value: captions[i] || '',\n        onChange: e => handleCaptionChange(i, e.target.value),\n        required: true,\n        style: {\n          width: '100%',\n          margin: '4px 0'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"datetime-local\",\n        value: times[i] || '',\n        onChange: e => handleTimeChange(i, e.target.value),\n        required: true,\n        style: {\n          width: '100%'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this)]\n    }, i, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }, this)), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        color: 'red',\n        margin: 8\n      },\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      type: \"submit\",\n      disabled: loading,\n      children: loading ? 'Uploading...' : 'Upload & Schedule'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(UploadForm, \"fcC/xQaR2ZE7YvrGtabqvjmLirk=\");\n_c = UploadForm;\nvar _c;\n$RefreshReg$(_c, \"UploadForm\");","map":{"version":3,"names":["React","useState","axios","jsxDEV","_jsxDEV","MAX_FILES","MAX_SIZE_MB","UploadForm","onUpload","_s","files","setFiles","captions","setCaptions","times","setTimes","error","setError","loading","setLoading","handleFileChange","e","selected","Array","from","target","length","file","type","size","fill","handleCaptionChange","i","val","arr","handleTimeChange","handleSubmit","preventDefault","some","c","t","form","FormData","forEach","f","append","res","post","headers","data","reels","err","_err$response","_err$response$data","response","onSubmit","style","marginBottom","children","accept","multiple","onChange","fileName","_jsxFileName","lineNumber","columnNumber","map","margin","border","padding","name","toFixed","placeholder","value","required","width","color","disabled","_c","$RefreshReg$"],"sources":["C:/Users/sangeeth/Desktop/ree/frontend/src/UploadForm.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst MAX_FILES = 10;\r\nconst MAX_SIZE_MB = 100;\r\n\r\nexport default function UploadForm({ onUpload }) {\r\n  const [files, setFiles] = useState([]);\r\n  const [captions, setCaptions] = useState([]);\r\n  const [times, setTimes] = useState([]);\r\n  const [error, setError] = useState('');\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  const handleFileChange = e => {\r\n    const selected = Array.from(e.target.files);\r\n    if (selected.length > MAX_FILES) {\r\n      setError(`Max ${MAX_FILES} files allowed.`);\r\n      return;\r\n    }\r\n    for (let file of selected) {\r\n      if (file.type !== 'video/mp4') {\r\n        setError('Only MP4 files allowed.');\r\n        return;\r\n      }\r\n      if (file.size > MAX_SIZE_MB * 1024 * 1024) {\r\n        setError(`File size must be < ${MAX_SIZE_MB}MB.`);\r\n        return;\r\n      }\r\n    }\r\n    setFiles(selected);\r\n    setCaptions(Array(selected.length).fill(''));\r\n    setTimes(Array(selected.length).fill(''));\r\n    setError('');\r\n  };\r\n\r\n  const handleCaptionChange = (i, val) => {\r\n    const arr = [...captions];\r\n    arr[i] = val;\r\n    setCaptions(arr);\r\n  };\r\n  const handleTimeChange = (i, val) => {\r\n    const arr = [...times];\r\n    arr[i] = val;\r\n    setTimes(arr);\r\n  };\r\n\r\n  const handleSubmit = async e => {\r\n    e.preventDefault();\r\n    if (!files.length) return setError('Select at least one video.');\r\n    if (captions.some(c => !c)) return setError('All captions required.');\r\n    if (times.some(t => !t)) return setError('All schedule times required.');\r\n    setLoading(true);\r\n    setError('');\r\n    const form = new FormData();\r\n    files.forEach(f => form.append('videos', f));\r\n    captions.forEach(c => form.append('captions', c));\r\n    times.forEach(t => form.append('scheduledTimes', t));\r\n    try {\r\n      const res = await axios.post('/api/reels/upload', form, {\r\n        headers: { 'Content-Type': 'multipart/form-data' },\r\n      });\r\n      onUpload(res.data.reels);\r\n      setFiles([]);\r\n      setCaptions([]);\r\n      setTimes([]);\r\n    } catch (err) {\r\n      setError(err.response?.data?.error || 'Upload failed');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} style={{ marginBottom: 32 }}>\r\n      <input type=\"file\" accept=\"video/mp4\" multiple onChange={handleFileChange} />\r\n      {files.map((file, i) => (\r\n        <div key={i} style={{ margin: '8px 0', border: '1px solid #eee', padding: 8 }}>\r\n          <div><b>{file.name}</b> ({(file.size/1024/1024).toFixed(1)} MB)</div>\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Caption\"\r\n            value={captions[i] || ''}\r\n            onChange={e => handleCaptionChange(i, e.target.value)}\r\n            required\r\n            style={{ width: '100%', margin: '4px 0' }}\r\n          />\r\n          <input\r\n            type=\"datetime-local\"\r\n            value={times[i] || ''}\r\n            onChange={e => handleTimeChange(i, e.target.value)}\r\n            required\r\n            style={{ width: '100%' }}\r\n          />\r\n        </div>\r\n      ))}\r\n      {error && <div style={{ color: 'red', margin: 8 }}>{error}</div>}\r\n      <button type=\"submit\" disabled={loading}>{loading ? 'Uploading...' : 'Upload & Schedule'}</button>\r\n    </form>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}